{"title":"在NexT的侧边栏添加近期文章板块","uid":"c5b29c51d4e2d58a38adb96d31b1d4ab","slug":"Recent-articles","date":"2022-05-03T02:33:52.000Z","updated":"2022-05-03T10:03:16.032Z","comments":true,"path":"api/articles/Recent-articles.json","keywords":null,"cover":[],"content":"<p>最近听说内链可以改善SEO，于是乎，我想在NexT的侧边栏添加近期文章板块</p>\n<p>在网络上查找的方案大致如下</p>\n<h2 id=\"第一种方法\"><a href=\"#第一种方法\" class=\"headerlink\" title=\"第一种方法\"></a>第一种方法</h2><pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\">&#123;% if theme.recent_posts %&#125;\n    &lt;div class&#x3D;&quot;links-of-blogroll motion-element &#123;&#123; &quot;links-of-blogroll-&quot; + theme.recent_posts_layout  &#125;&#125;&quot;&gt;\n      &lt;div class&#x3D;&quot;links-of-blogroll-title&quot;&gt;\n        &lt;!-- modify icon to fire by szw --&gt;\n        &lt;i class&#x3D;&quot;fa fa-history fa-&#123;&#123; theme.recent_posts_icon | lower &#125;&#125;&quot; aria-hidden&#x3D;&quot;true&quot;&gt;&lt;&#x2F;i&gt;\n        &#123;&#123; theme.recent_posts_title &#125;&#125;\n      &lt;&#x2F;div&gt;\n      &lt;ul class&#x3D;&quot;links-of-blogroll-list&quot;&gt;\n        &#123;% set posts &#x3D; site.posts.sort(&#39;-date&#39;) %&#125;\n        &#123;% for post in posts.slice(&#39;0&#39;, &#39;5&#39;) %&#125;\n          &lt;li&gt;\n            &lt;a href&#x3D;&quot;&#123;&#123; url_for(post.path) &#125;&#125;&quot; title&#x3D;&quot;&#123;&#123; post.title &#125;&#125;&quot; target&#x3D;&quot;_blank&quot;&gt;&#123;&#123; post.title &#125;&#125;&lt;&#x2F;a&gt;\n          &lt;&#x2F;li&gt;\n        &#123;% endfor %&#125;\n      &lt;&#x2F;ul&gt;\n    &lt;&#x2F;div&gt;\n&#123;% endif %&#125;</code></pre>\n\n<p>将此代码贴在<code>next/layout/macro/sidebar.swig</code>中的<code>if theme.links</code>对应的<code>endif</code>后面<br>为了配置方便，在主题的<code>config.yml</code>中添加了几个变量，如下：</p>\n<pre class=\"line-numbers language-swift\" data-language=\"swift\"><code class=\"language-swift\">recent_posts_title: 近期文章\nrecent_posts_layout: block\nrecent_posts: true</code></pre>\n\n\n\n<p>以上操作之后NexT 7.8.0在侧边栏有“近期文章”的文字标志。但是没有链接。</p>\n<p>于是我换了另外一种办法，基于NexT 8.X</p>\n<h2 id=\"第二种办法\"><a href=\"#第二种办法\" class=\"headerlink\" title=\"第二种办法\"></a>第二种办法</h2><ol>\n<li>新建 source&#x2F;_data&#x2F;sidebar.njk 文件，内容如下：</li>\n</ol>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">&#123;# RecentPosts #&#125;\n&#123;%- if theme.recent_posts %&#125;\n  &lt;div class&#x3D;&quot;links-of-recent-posts motion-element&quot;&gt;\n    &lt;div class&#x3D;&quot;links-of-recent-posts-title&quot;&gt;\n      &#123;%- if theme.recent_posts.icon %&#125;\n      &lt;i class&#x3D;&quot;&#123;&#123; theme.recent_posts.icon &#125;&#125; fa-fw&quot;&gt;&lt;&#x2F;i&gt;\n      &#123;%- endif %&#125;\n      &#123;&#123; theme.recent_posts.title &#125;&#125;\n    &lt;&#x2F;div&gt;\n    &lt;ul class&#x3D;&quot;links-of-recent-posts-list&quot;&gt;\n      &#123;%- set posts &#x3D; site.posts.sort(&#39;date&#39;, &#39;desc&#39;).toArray() %&#125;\n      &#123;%- for post in posts.slice(&#39;0&#39;, theme.recent_posts.max_count) %&#125;\n        &lt;li class&#x3D;&quot;links-of-recent-posts-item&quot;&gt;\n          &#123;&#123; next_url(post.path, post.title, &#123;title: post.path&#125;) &#125;&#125;\n        &lt;&#x2F;li&gt;\n      &#123;%- endfor %&#125;\n    &lt;&#x2F;ul&gt;\n  &lt;&#x2F;div&gt;\n&#123;%- endif %&#125;</code></pre>\n\n<p>2.修改config.next.yml，取消 custom_file_path 中的 sidebar 和 style 两个注释，并新增 recent_posts 内容。</p>\n<pre class=\"line-numbers language-yaml\" data-language=\"yaml\"><code class=\"language-yaml\">custom_file_path:\n  #head: source&#x2F;_data&#x2F;head.swig\n  #header: source&#x2F;_data&#x2F;header.swig\n  sidebar: source&#x2F;_data&#x2F;sidebar.njk\n  #postMeta: source&#x2F;_data&#x2F;post-meta.swig\n  #postBodyEnd: source&#x2F;_data&#x2F;post-body-end.swig\n  #footer: source&#x2F;_data&#x2F;footer.swig\n  #bodyEnd: source&#x2F;_data&#x2F;body-end.swig\n  #variable: source&#x2F;_data&#x2F;variables.styl\n  #mixin: source&#x2F;_data&#x2F;mixins.styl\n  style: source&#x2F;_data&#x2F;styles.styl\n\nrecent_posts:\n# 块标题\n  title: 最近文章\n# 图标\n  icon: fa fa-history\n# 最多多少文章链接\n  max_count: 5</code></pre>\n\n<p>3.修改 source&#x2F;_data&#x2F;styles.styl 文件，文件不存在新建即可。添加如下代码：</p>\n<pre class=\"line-numbers language-css\" data-language=\"css\"><code class=\"language-css\">&#x2F;&#x2F; 近期文章\n.links-of-recent-posts\n  font-size: 0.8125em\n  margin-top: 10px\n\n.links-of-recent-posts-title\n  font-size: 1.03em\n  font-weight: 600\n  margin-top: 0\n\n.links-of-recent-posts-list\n  list-style: none\n  margin: 0\n  padding: 0</code></pre>\n\n\n\n<p>然后发现这个只在站点概括中，在文章目录中不存在</p>\n<img src=\"https://inmb.oss-cn-shenzhen.aliyuncs.com/inmb/image-20220503170621133.png\" alt=\"只在站点概括中\" style=\"zoom:50%;\" />\n\n<img src=\"https://inmb.oss-cn-shenzhen.aliyuncs.com/inmb/image-20220503170947135.png\" alt=\"在文章目录中没有显示\" style=\"zoom:60%;\" />\n\n<p>因为大多数访客是不会主动点击站点概括的，那么如何把近期文章板块加入到文章目录的侧边栏中去呢？</p>\n<p>我结合了第一种方法</p>\n<p>因为第一种办法，能够在目录中显示近期文章四个字，那么说明第一种方法可行，但是可能已经过时或者是笔者配置不正确。</p>\n<h2 id=\"解决办法\"><a href=\"#解决办法\" class=\"headerlink\" title=\"解决办法\"></a>解决办法</h2><p>把上面新建的<code>sidebar.njk</code>代码复制在<code>next/layout/_macro/sidebar.swig</code>中的适应位置，如果没有修改添加过其他板块，可以在<code>&#123;%- if theme.back2top.enable and theme.back2top.sidebar %&#125;</code>的前面粘贴</p>\n<p>因为本博客添加了tag云，所以笔者放在了&#96;</p>\n","text":"最近听说内链可以改善SEO，于是乎，我想在NexT的侧边栏添加近期文章板块 在网络上查找的方案大致如下 第一种方法&#123;% if theme.recent_posts %&#125; &lt;div class&#x3D;&quot;links-of-blogroll mo...","link":"","photos":[],"count_time":{"symbolsCount":"3.8k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"hexo","slug":"hexo","count":5,"path":"api/tags/hexo.json"},{"name":"NexT","slug":"NexT","count":5,"path":"api/tags/NexT.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">第一种方法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E7%AC%AC%E4%BA%8C%E7%A7%8D%E5%8A%9E%E6%B3%95\"><span class=\"toc-text\">第二种办法</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95\"><span class=\"toc-text\">解决办法</span></a></li></ol>","author":{"name":"ACbug","slug":"blog-author","avatar":"https://img1.i-nmb.cn/ava.png","link":"/","description":"西北民族大学数学与计算机科学学院<br>系统与软件工作室网络安全组","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"Java对象和类—JAVA语言基础","uid":"476613efa9f6b315a06dafe6bc2ebd45","slug":"Class-and-object","date":"2022-05-09T12:32:46.000Z","updated":"2022-05-09T14:37:48.980Z","comments":true,"path":"api/articles/Class-and-object.json","keywords":null,"cover":[],"text":" 对象：对象是类的一个实例（对象不是找个女朋友），有状态和行为。例如，一条狗是一个对象，它的状态有：颜色、名字、品种；行为有：摇尾巴、叫、吃等。 类：类是一个模板，它描述一类对象的行为和状态。 下面我们大致具体了解一下在Java中类和面向对象 面向对象概述对象对象是事物存在的实体...","link":"","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"Java","slug":"Java","count":8,"path":"api/tags/Java.json"},{"name":"Eclipse","slug":"Eclipse","count":7,"path":"api/tags/Eclipse.json"}],"author":{"name":"ACbug","slug":"blog-author","avatar":"https://img1.i-nmb.cn/ava.png","link":"/","description":"西北民族大学数学与计算机科学学院<br>系统与软件工作室网络安全组","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"添加友链踩坑记录","uid":"d7143db213c9893f242cc9211977e79b","slug":"Add-links","date":"2022-05-02T19:11:54.000Z","updated":"2022-05-02T19:11:36.713Z","comments":true,"path":"api/articles/Add-links.json","keywords":null,"cover":null,"text":"新增links页面$ hexo new page links 配置menu主题配置文件_config.yml中menu下添加： links: &#x2F;links&#x2F; || fa fa-link /themes/next/languages/zh-Hans.yml文件中...","link":"","photos":[],"count_time":{"symbolsCount":"5.1k","symbolsTime":"5 mins."},"categories":[],"tags":[{"name":"hexo","slug":"hexo","count":5,"path":"api/tags/hexo.json"},{"name":"NexT","slug":"NexT","count":5,"path":"api/tags/NexT.json"}],"author":{"name":"ACbug","slug":"blog-author","avatar":"https://img1.i-nmb.cn/ava.png","link":"/","description":"西北民族大学数学与计算机科学学院<br>系统与软件工作室网络安全组","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}